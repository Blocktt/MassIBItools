---
title: "MassDEP Stream IBI Summary Report"
author: "`r Sys.getenv('USERNAME')`"
date: "`r format(Sys.time(), '%Y-%m-%d %H:%M:%S')`"
output:
  word_document:
    toc: yes
  pdf_document:
    toc: yes
    toc_depth: '3'
  html_document:
    toc: yes
    toc_depth: 3
    toc_float: no
subtitle: Metric Scores and Values
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(results='asis', echo=FALSE, warning=FALSE)
# needed for trouble shooting
boo_DEBUG <- FALSE
if(boo_DEBUG==TRUE){
  # myConfig <- file.path(system.file(package="ContDataQC"), "extdata", "config.ORIG.R")
  # source(myConfig)
}## IF ~ boo_DEBUG ~ END
```

# DATA FILE INFORMATION
```{r data_file_info}
  # Results File
  df_metval <- df_metval
  df_metsc <- df_metsc
  
  # Report Info
  myReportDate <- format(Sys.time(), '%Y-%m-%d %H:%M:%S')
  cat(paste("**Report Date:** " ,myReportDate, "\n\n", sep=""))
  myUser <- Sys.getenv("USERNAME")
  cat(paste("**Generated By:** ", myUser, "\n\n", sep=""))
  
  # Number of Samples
  myNumRecords <- nrow(df_metval)
  cat(paste("**Number of Records:** ", myNumRecords, "\n\n", sep=""))
  
  # Period of Record
  POR <- paste(min(df_metval$COLLDATE)," to ", max(df_metval$COLLDATE), sep="")
  cat(paste("**Period of Record:** ", POR, sep="", collapse="\n\n"))
```

## Plots
```{r Results_Index_Plot}
# Packages
library(ggplot2)

# default bin width is 1/30 of range
# need to specify to avoid warning about bins = 30.
range_div30 <- (max(df_metsc$Index, na.rm = TRUE) - min(df_metsc$Index, na.rm = TRUE))/30

# Plot
p1 <- ggplot(df_metsc, aes(Index), fill=INDEX_REGION, shape=INDEX_REGION) +
            geom_dotplot(aes_string(fill="INDEX_REGION"), method="histodot", binwidth = range_div30) +
            labs(x="Index Value"
                 , title = "Index values by region.") +
            theme(axis.title.y=element_blank()
                  , axis.ticks.y=element_blank()
                 , axis.text.y=element_blank()
                  )

# Output
p1
```
